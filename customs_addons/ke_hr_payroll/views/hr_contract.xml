<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <!-- Modifying Contracts Form to add kenyan specific details -->
        <record id="ke_view_contract_form_inherit01" model="ir.ui.view">
            <field name="name">hr.contract.form.inherit_01</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//page[@name='information']" position="after">
                        <page name="benefits" string="Non-Cash Allowances"
                              groups="hr.group_hr_user">
                            <field name="id"/>
                            <field name="benefits"
                                   context="{'default_contract_id': id}">
                                <tree colors="red:amount == 0">
                                    <field name="id" invisible="1"/>
                                    <field name="company_id" invisible="1"/>
                                    <field name="currency_id" invisible="1"/>
                                    <field name="contract_id" invisible="1"/>
                                    <field name="name"/>
                                    <field name="rule_id"/>
                                    <field name="computation"/>
                                    <field name="fixed"
                                           attrs="{'readonly': [('computation', '!=', 'fixed')]}"
                                           widget="monetary"
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="amount" widget="monetary"
                                           options="{'currency_field': 'currency_id'}"/>
                                </tree>
                            </field>
                        </page>
                        <page name="cash_allowances" string="Cash Allowances"
                              groups="hr.group_hr_user">
                            <field name="id" invisible="1"/>
                            <field name="cash_allowances"
                                   context="{'default_contract_id': id}">
                                <tree colors="red:amount == 0">
                                    <field name="id" invisible="1"/>
                                    <field name="contract_id" invisible="1"/>
                                    <field name="company_id" invisible="1"/>
                                    <field name="currency_id" invisible="1"/>
                                    <field name="name"/>
                                    <field name="rule_id"/>
                                    <field name="computation"/>
                                    <field name="fixed"
                                           attrs="{'readonly': [('computation', '!=', 'fixed')]}"
                                           widget="monetary"
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="amount" widget="monetary"
                                           options="{'currency_field': 'currency_id'}"/>
                                </tree>
                            </field>
                        </page>
                    </xpath>
                </data>
            </field>
        </record>
           <!--add remuneration type field in the hr contract -->
        <record id="hr_ke_contract_inherit" model="ir.ui.view">
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//field[@name = 'structure_type_id']"
                           position="after">
                        <field name="rem_type"/>
                        <field name="tax_applicable"/>
                    </xpath>
                    <xpath expr="//field[@name = 'job_id']" position="after">
                        <field name="house"/>
                        <field name="car"/>
                    </xpath>
                    <xpath expr="//field[@name = 'wage']" position="replace">
                        <field name="currency_id" invisible="1"/>
                        <field name="wage" widget="monetary"
                               options="{'currency_field': 'currency_id'}"/>
                    </xpath>
                    <xpath expr="//notebook" position="inside">
                        <page string="Housing"
                              attrs="{'invisible':[('house', '=', False)]}">
                            <group>
                                <group>
                                    <field name="house_type"
                                           attrs="{'required':[('house', '=', True)]}"/>
                                    <field name="rent"
                                           attrs="{'invisible':['|',('house_type', '=', 'agric'),('house_type','=','director')]}"/>
                                </group>
                                <group>
                                    <field name="rent_recovered"
                                           attrs="{'invisible':['|',('house_type', '=', 'agric'),('house_type','=','director')]}"/>
                                </group>
                            </group>
                        </page>
                        <page string="Car Benefit"
                              attrs="{'invisible':[('car', '=', False)]}">
                            <field name="cars">
                                <tree editable="top">
                                    <field name="name"/>
                                    <field name="make"/>
                                    <field name="body"/>
                                    <field name="cc_rate"/>
                                    <field name="cost_type"/>
                                    <field name="cost_hire"
                                           attrs="{'readonly':[('cost_type','=','Owned')], 'required':[('cost_type','=','Owned')]}"/>
                                    <field name="cost_own"
                                           attrs="{'readonly':[('cost_type','=','Hired')], 'required':[('cost_type','=','Hired')]}"/>
                                </tree>
                            </field>
                        </page>
                    </xpath>
                </data>
            </field>
        </record>
    </data>
</odoo>